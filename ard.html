
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analysis Ready Data generation &#8212; openEO Python Client 0.6.2a1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API" href="api.html" />
    <link rel="prev" title="User-Defined Functions (UDF) explained" href="udf.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">openEO Python Client</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Open-EO&repo=openeo-python-client&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/Open-EO/openeo-python-client">
    <img
        alt="https://secure.travis-ci.org/Open-EO/openeo-python-client.svg?branch=master"
        src="https://secure.travis-ci.org/Open-EO/openeo-python-client.svg?branch=master"
    />
</a>
</p>



  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Analysis Ready Data generation</a><ul>
<li><a class="reference internal" href="#atmospheric-correction">Atmospheric correction</a><ul>
<li><a class="reference internal" href="#reference-implementations">Reference implementations</a><ul>
<li><a class="reference internal" href="#eodc-backend">EODC backend</a></li>
<li><a class="reference internal" href="#geotrellis-backend">Geotrellis backend</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#sar-backscatter">SAR backscatter</a><ul>
<li><a class="reference internal" href="#id4">Reference implementations</a><ul>
<li><a class="reference internal" href="#id5">EODC backend</a></li>
<li><a class="reference internal" href="#id6">Geotrellis backend</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="udf.html" title="previous chapter">User-Defined Functions (UDF) explained</a></li>
      <li>Next: <a href="api.html" title="next chapter">API</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><!-- Alabaster (krTheme++) Hacks -->

<div class="sidebar-meta">
<h3>Meta</h3>
<div>Docs for openEO Python Client</div>
<div>Version: <code>0.6.2a1</code></div>
<div>Last updated: 2021/04/01</div>
</div>

<!-- CSS Adjustments from requests: https://github.com/kennethreitz/requests/blob/master/docs/_templates/hacks.html -->
<style type="text/css">
  /* Rezzy requires precise alignment. */
  img.logo {margin-left: -20px!important;}
  /* "Quick Search" should be capitalized. */
  div#searchbox h3 {text-transform: capitalize;}
  /* Make the document a little wider, less code is cut-off. */
  div.document {width: 1008px;}
  /* Much-improved spacing around code blocks. */
  div.highlight pre {padding: 11px 14px;}
  /* Remain Responsive! */
  @media screen and (max-width: 1008px) {
    div.sphinxsidebar {display: none;}
    div.document {width: 100%!important;}
    /* Have code blocks escape the document right-margin. */
    div.highlight pre {margin-right: -30px;}
  }

  /* Reduce space between paragraphs for better visual structure */
  p { margin: 1ex 0; }

  /* Hide "view source code" links by default, only show on hover */
  dt .viewcode-link { visibility: hidden; font-size: 70%; }
  dt:hover .viewcode-link { visibility: visible; }

  /* More breathing space between successive methods */
  dl { margin-bottom: 1.5em; }

  dl.field-list > dt {
      /* Cleaner aligning of Parameters/Returns/Raises listing with method description paragraphs */
      padding-left: 0;
      /* Make Parameters/Returns/Raises labels less dominant */
      text-transform: uppercase;
      font-size: 70%;
  }

  .sidebar-meta {
      font-size: 80%;
  }

</style>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="analysis-ready-data-generation">
<span id="ard"></span><h1>Analysis Ready Data generation<a class="headerlink" href="#analysis-ready-data-generation" title="Permalink to this headline">¶</a></h1>
<p>For certain use cases, the preprocessed data collections available in the openEO backends are not sufficient or simply not
available. For that case, openEO supports a few very common preprocessing scenario:</p>
<ul class="simple">
<li><p>Atmospheric correction of optical data</p></li>
<li><p>SAR backscatter computation</p></li>
</ul>
<p>These processes also offer a number of parameters to customize the processing. There’s also variants with a default
parametrization that results in data that is compliant with CEOS CARD4L specifications <a class="reference external" href="https://ceos.org/ard/">https://ceos.org/ard/</a>.</p>
<p>We should note that these operations can be computationally expensive, so certainly affect overall processing time and
cost of your final algorithm. Hence, make sure to make an informed decision when you decide to use these methods.</p>
<div class="section" id="atmospheric-correction">
<h2>Atmospheric correction<a class="headerlink" href="#atmospheric-correction" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://processes.openeo.org/draft/#atmospheric_correction">atmospheric correction</a> process can apply a chosen
method on raw ‘L1C’ data. The supported methods and input datasets depend on the backend, because not every method is
validated or works on any dataset, and different backends try to offer a variety of options. This gives you as a user
more options to run and compare different methods, and select the most suitable one for your case.</p>
<p>To perform an <a class="reference external" href="https://processes.openeo.org/draft/#atmospheric_correction">atmospheric correction</a>, the user has to
load an uncorrected L1C optical dataset. On the resulting datacube, the <a class="reference internal" href="api.html#openeo.rest.datacube.DataCube.atmospheric_correction" title="openeo.rest.datacube.DataCube.atmospheric_correction"><code class="xref py py-func docutils literal notranslate"><span class="pre">atmospheric_correction()</span></code></a>
method can be invoked. Note that it may not be possible to apply certain processes to the raw input data: preprocessing
algorithms can be tightly coupled with the raw data, making it hard or impossible for the backend to perform operations
in between loading and correcting the data.</p>
<p>The CARD4L variant of this process is: <a class="reference internal" href="api.html#openeo.rest.datacube.DataCube.ard_surface_reflectance" title="openeo.rest.datacube.DataCube.ard_surface_reflectance"><code class="xref py py-func docutils literal notranslate"><span class="pre">ard_surface_reflectance()</span></code></a>. This process follows
CEOS specifications, and thus can additional processing steps, like a BRDF correction, that are not yet available as a
separate process.</p>
<div class="section" id="reference-implementations">
<h3>Reference implementations<a class="headerlink" href="#reference-implementations" title="Permalink to this headline">¶</a></h3>
<p>This section shows a few working examples for these processes.</p>
<div class="section" id="eodc-backend">
<h4>EODC backend<a class="headerlink" href="#eodc-backend" title="Permalink to this headline">¶</a></h4>
<p>EODC (<a class="reference external" href="https://openeo.eodc.eu/v1.0">https://openeo.eodc.eu/v1.0</a>) supports ard_surface_reflectance, based on the FORCE toolbox. (<a class="reference external" href="https://github.com/davidfrantz/force">https://github.com/davidfrantz/force</a>)</p>
</div>
<div class="section" id="geotrellis-backend">
<h4>Geotrellis backend<a class="headerlink" href="#geotrellis-backend" title="Permalink to this headline">¶</a></h4>
<p>The geotrellis backend (<a class="reference external" href="https://openeo.vito.be">https://openeo.vito.be</a>) supports <a class="reference internal" href="api.html#openeo.rest.datacube.DataCube.atmospheric_correction" title="openeo.rest.datacube.DataCube.atmospheric_correction"><code class="xref py py-func docutils literal notranslate"><span class="pre">atmospheric_correction()</span></code></a> with iCor and SMAC as methods.
The version of iCor only offers basic atmoshperic correction features, without special options for water products: <a class="reference external" href="https://remotesensing.vito.be/case/icor">https://remotesensing.vito.be/case/icor</a>
SMAC is implemented based on: <a class="reference external" href="https://github.com/olivierhagolle/SMAC">https://github.com/olivierhagolle/SMAC</a>
Both methods have been tested with Sentinel-2 as input. The viewing and sun angles need to be selected by the user to make them
available for the algorithm.</p>
<p>This is an example of applying iCor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l1c</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">load_collection</span><span class="p">(</span><span class="s2">&quot;SENTINEL2_L1C_SENTINELHUB&quot;</span><span class="p">,</span>
        <span class="n">spatial_extent</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;west&#39;</span><span class="p">:</span><span class="mf">3.758216409030558</span><span class="p">,</span><span class="s1">&#39;east&#39;</span><span class="p">:</span><span class="mf">4.087806252</span><span class="p">,</span><span class="s1">&#39;south&#39;</span><span class="p">:</span><span class="mf">51.291835566</span><span class="p">,</span><span class="s1">&#39;north&#39;</span><span class="p">:</span><span class="mf">51.3927399</span><span class="p">,</span><span class="s1">&#39;crs&#39;</span><span class="p">:</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">},</span>
        <span class="n">temporal_extent</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2017-03-07&quot;</span><span class="p">,</span><span class="s2">&quot;2017-03-07&quot;</span><span class="p">],</span><span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;B04&#39;</span><span class="p">,</span><span class="s1">&#39;B03&#39;</span><span class="p">,</span><span class="s1">&#39;B02&#39;</span><span class="p">,</span><span class="s1">&#39;B09&#39;</span><span class="p">,</span><span class="s1">&#39;B8A&#39;</span><span class="p">,</span><span class="s1">&#39;B11&#39;</span><span class="p">,</span><span class="s1">&#39;sunAzimuthAngles&#39;</span><span class="p">,</span><span class="s1">&#39;sunZenithAngles&#39;</span><span class="p">,</span><span class="s1">&#39;viewAzimuthMean&#39;</span><span class="p">,</span><span class="s1">&#39;viewZenithMean&#39;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">l1c</span><span class="o">.</span><span class="n">atmospheric_correction</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;iCor&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s2">&quot;rgb-icor.geotiff&quot;</span><span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;GTiff&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="sar-backscatter">
<h2>SAR backscatter<a class="headerlink" href="#sar-backscatter" title="Permalink to this headline">¶</a></h2>
<p>Data from synthetic aperture radar sensors requires significant preprocessing to be calibrated and normalized for terrain.
This is referred to as backscatter computation, and supported by
<a class="reference external" href="https://processes.openeo.org/draft/#sar_backscatter">sar_backscatter</a> and the CARD4L compliant variant
<a class="reference external" href="https://processes.openeo.org/draft/#ard_normalized_radar_backscatter">ard_normalized_radar_backscatter</a></p>
<p>The user should load a datacube containing raw SAR data, such as Sentinel-1 GRD. On the resulting datacube, the
<a class="reference internal" href="api.html#openeo.rest.datacube.DataCube.sar_backscatter" title="openeo.rest.datacube.DataCube.sar_backscatter"><code class="xref py py-func docutils literal notranslate"><span class="pre">sar_backscatter()</span></code></a> method can be invoked. The CEOS CARD4L variant is:
<a class="reference internal" href="api.html#openeo.rest.datacube.DataCube.ard_normalized_radar_backscatter" title="openeo.rest.datacube.DataCube.ard_normalized_radar_backscatter"><code class="xref py py-func docutils literal notranslate"><span class="pre">ard_normalized_radar_backscatter()</span></code></a>. These processes are tightly coupled to
metadata from specific sensors, so it is not possible to apply other processes to the datacube first,
with the exception of specifying filters in space and time.</p>
<div class="section" id="id4">
<h3>Reference implementations<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>This section shows a few working examples for these processes.</p>
<div class="section" id="id5">
<h4>EODC backend<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>EODC (<a class="reference external" href="https://openeo.eodc.eu/v1.0">https://openeo.eodc.eu/v1.0</a>) supports sar_backscatter, based on the Sentinel-1 toolbox. (<a class="reference external" href="https://sentinel.esa.int/web/sentinel/toolboxes/sentinel-1">https://sentinel.esa.int/web/sentinel/toolboxes/sentinel-1</a>)</p>
</div>
<div class="section" id="id6">
<h4>Geotrellis backend<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>When working with the Sentinelhub SENTINEL1_GRD collection, both sar processes can be used. The underlying implementation is
provided by Sentinelhub, (<a class="reference external" href="https://docs.sentinel-hub.com/api/latest/data/sentinel-1-grd/#processing-options">https://docs.sentinel-hub.com/api/latest/data/sentinel-1-grd/#processing-options</a>), and offers full
CARD4L compliant processing options.</p>
<p>This is an example of <a class="reference internal" href="api.html#openeo.rest.datacube.DataCube.ard_normalized_radar_backscatter" title="openeo.rest.datacube.DataCube.ard_normalized_radar_backscatter"><code class="xref py py-func docutils literal notranslate"><span class="pre">ard_normalized_radar_backscatter()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s1grd</span> <span class="o">=</span> <span class="p">(</span><span class="n">connection</span><span class="o">.</span><span class="n">load_collection</span><span class="p">(</span><span class="s1">&#39;SENTINEL1_GRD&#39;</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;VH&#39;</span><span class="p">,</span> <span class="s1">&#39;VV&#39;</span><span class="p">])</span>
 <span class="o">.</span><span class="n">filter_bbox</span><span class="p">(</span><span class="n">west</span><span class="o">=</span><span class="mf">2.59003</span><span class="p">,</span> <span class="n">east</span><span class="o">=</span><span class="mf">2.8949</span><span class="p">,</span> <span class="n">north</span><span class="o">=</span><span class="mf">51.2206</span><span class="p">,</span> <span class="n">south</span><span class="o">=</span><span class="mf">51.069</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">filter_temporal</span><span class="p">(</span><span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2019-10-10&quot;</span><span class="p">,</span><span class="s2">&quot;2019-10-10&quot;</span><span class="p">]))</span>

<span class="n">job</span> <span class="o">=</span> <span class="n">s1grd</span><span class="o">.</span><span class="n">ard_normalized_radar_backscatter</span><span class="p">()</span><span class="o">.</span><span class="n">execute_batch</span><span class="p">()</span>

<span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">job</span><span class="o">.</span><span class="n">get_results</span><span class="p">()</span><span class="o">.</span><span class="n">get_assets</span><span class="p">():</span>
    <span class="n">asset</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
</pre></div>
</div>
<p>When working with other GRD data, an implementation based on Orfeo Toolbox is used:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.orfeo-toolbox.org/CookBook/Applications/app_SARCalibration.html">Orfeo docs</a></p></li>
<li><p><a class="reference external" href="https://github.com/Open-EO/openeo-geopyspark-driver/blob/master/openeogeotrellis/collections/s1backscatter_orfeo.py">Implementation</a></p></li>
</ul>
<p>The Orfeo implementation currently only supports sigma0 computation, and is not CARD4L compliant.</p>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2017 - 2021, Jeroen Dries.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/ard.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/Open-EO/openeo-python-client" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>